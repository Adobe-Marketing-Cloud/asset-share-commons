<!--/*
  ~ Asset Share Commons
  ~
  ~ Copyright [2021]  Adobe
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
 */-->

<!--/*

Represents a logical download from Asset Share Commons.

 */-->

<template data-sly-template.download="${ @ downloadProgress }"
          data-sly-use.downloadButtonsTemplate="templates/download-buttons.html"
          data-sly-use.downloadArtifactTemplate="templates/download-artifact.html">

    <div class="title">

        <ul>
            <li><i class="file archive icon"></i> DOWNLOAD NAME</li>
            <li data-sly-test="${downloadProgress.status != 'FAILURE'}">
                <label>${properties['fileSize'] || 'File size' @ i18n}</label> ${downloadProgress.totalSize}
            </li>
            <li data-sly-test="${downloadProgress.status != 'FAILURE'}">
                <label>${properties['fileSize'] || 'File size' @ i18n}</label> ${downloadProgress.totalSize}
            </li>
        </ul>

        <span class="cmp-download__progress right-align">
            <p data-sly-test="${downloadProgress.progress < 100}">${downloadProgress.progress}% ${properties['progress'] || 'preparing download' @ i18n}'</p>

            <sly  data-sly-test="${downloadProgress.progress == 100}"
                  data-sly-call="${downloadButtonsTemplate.downloadButtons @ downloadArtifacts = downloadProgress.artifacts}"/>
        </span>

    </div>

    <div>
        <div class="content">
            Status: ${downloadProgress.status}

            <!--/* Non-failing downloads show the downloads */-->
            <div id="TODO"
                 data-asset-share-id="download-archive"
                 data-sly-test="${downloadProgress.status != 'FAILURE'}">

                <br>

                ${properties['fileSize'] || 'Archive file size' @ i18n}: ${downloadProgress.totalSize}
            </div>

            <!--/* All downloads (success/failing) show the downloads */-->

            TODO ALL LABEL PROPERTIES
            ${properties['assetsCount']}: ${downloadProgress.totalCount}<br>
            (Success/Failure count?)

            ${properties['status']}: ${downloadProgress.status @ i18n} -<br>

            <div class="accordion">
                <div class=" title">
                    <i class="dropdown icon"></i> ${properties['assetListTitle']} -> assetListTitleLabel?
                </div>

                ${downloadProgress.artifacts.size}

                <div class="content"
                     data-sly-list.downloadArtifact="${downloadProgress.artifacts}">
                    <sly data-sly-call="${downloadArtifactTemplate.artifact @ downloadArtifact = downloadArtifact}"></sly>
                </div>

            </div>
        </div>
    </div>

</template>
